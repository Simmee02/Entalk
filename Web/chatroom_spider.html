<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Chatroom - En'talk</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="js/chat.js"></script>
    <style>
        body, html {
            height: 100%;
            margin: 0;
            font-family: Arial, sans-serif;
            background-image: url('../images/Spiderman_back.png'); /* Hermione Background */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body>
    <div id="top-bar">
        <img src="../images/Entalk_logo.png" alt="Entalk Logo" class="logo">
    </div>
    <!-- Horizontal line -->
    <div class="horizontal-line"></div>

    <div id="chatroom">
        <aside id="sidebar">
            <div>
                <button id="createNewRoom">New chat +</button>
                <p id="days">Previous 7 Days</p>
                <ul id="rooms">
                    <li onclick="changeRoom('room1')">Room 1</li>
                    <li onclick="changeRoom('room2')">Room 2</li>
                </ul>
            </div>
            <div>
                <div id="settings">
                    <img src="../images/icon1.png" alt="Settings Icon">
                    <span>Settings</span>
                </div>
                <div id="notification">
                    <img src="../images/icon2.png" alt="Notification Icon">
                    <span>Notifications</span>
                </div>
            </div>
        </aside>
        <section id="chat-area">
            <div id="messages">
                <!-- Message area -->
            </div>
            <div class="input-area">
                <input type="text" id="userInput" placeholder="Enter your message...">
                <button id="runPython">Send</button>
            </div>
        </section>
    </div>

    <!-- Modal Structure -->
    <div id="newChatModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="profile-section">
                <img src="../images/img_sherlockProfile.png" alt="Sherlock Holmes" class="profile-pic-big">
                <div class="profile-details">
                    <!-- Details will be updated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script src="js/spidermanModal.js"></script>
    <script src="js/setupModal.js"></script>
    <script src="js/chat.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            setupInitialContent();
            document.getElementById('createNewRoom').addEventListener('click', function() {
                openModal();
            });
            document.getElementById('runPython').onclick = sendMessage;

            const closeButton = document.querySelector('.close');
            if (closeButton) {
                closeButton.addEventListener('click', closeModal);
            }

            if (window.location.hash === '#chatroom') {
                document.getElementById('main-screen').style.display = 'none';
                const chatroom = document.getElementById('chatroom');
                chatroom.style.display = 'flex';
                chatroom.classList.add('active');
            }
        });

        function startChat() {
            document.getElementById('main-screen').style.display = 'none';
            const chatroom = document.getElementById('chatroom');
            chatroom.style.display = 'flex';
            chatroom.classList.add('active');
        }

        function closeModal() {
            const modal = document.getElementById('newChatModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        const closeButton = document.querySelector('.close');
        if (closeButton) {
            closeButton.addEventListener('click', closeModal);
        }
    </script>
</body>
</html>